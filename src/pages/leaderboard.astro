---
export const prerender = false;

// - Session
import { getSession } from "auth-astro/server";
// Components
import MostSeenCasts from "../components/blocks/data/MostSeenCastsTable.tsx";
// - UI
import JustHero from "../components/blocks/hero/JustHero.astro";
import AuthBlock from "../components/blocks/modal/AuthBlock.astro";
// - Layout
import Layout from "../layouts/Layout.astro";
// - SEO
const SEO = {
	title: "SassyHash ðŸ’… |Leaderboard",
	description: "See the leaderboard for SassyHash.",
};
// - Page Header
const header = {
	title: "Leaderboard",
	text: "Weekly contest to elevate the sassiest hashes.",
};

const session = await getSession(Astro.request);
const fid = session?.user?.email ? Number.parseInt(session?.user?.email) : null;
---

<Layout title={SEO.title} description={SEO.description}>
	<JustHero
		title={header.title}
		text={header.text}
		id="contact"
		classes="bg-neutral-50 dark:bg-neutral-950/80"
	>
	
	<details class="group w-full">
		<summary class="flex w-full cursor-pointer items-center justify-between rounded-lg p-3 hover:bg-neutral-100 dark:hover:bg-neutral-900">
			<span class="text-xl sm:text-2xl font-bold">Rules</span>
			<svg class="h-6 w-6 sm:h-5 sm:w-5 transition-transform group-open:rotate-180" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
				<path stroke-linecap="round" stroke-linejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5" />
			</svg>
		</summary>
		<div class="prose dark:prose-invert prose-neutral mt-4 px-3 pb-4 max-w-none">
			<ul>
				<li>Contest runs over same time frame as Warpcast Rewards</li>
				<li>The <strong>10</strong> most engaging SassyHash will share a <strong>$100 USDC</strong> pool</li>
				<li>One user can win multiple times</li>
				<li>Anti-collusion will be based on "decentralized retroactive delegation"</li>
			</ul>
		</div>
	</details>
	<hr />
	<MostSeenCasts fid={fid} client:only="react" />
	<span class="text-emphasis text-xs">as of 
		{new Date().toLocaleDateString('en-US', {timeZone: 'America/New_York'}).split(' ')[0]}
	</span> 
	<hr />

	<AuthBlock />
	</JustHero>
</Layout>
