---
export const prerender = false;

// Components
// - Session
import { getSession } from 'auth-astro/server';
// - Layout
import Layout from '../layouts/Layout.astro';
// - UI
import MyMessagesTable from '../components/blocks/data/MyMessagesTable';
import JustHero from '../components/blocks/hero/JustHero.astro';
import AuthBlock from '../components/blocks/modal/AuthBlock.astro';

// Content
// - SEO
const SEO = {
	title: 'SassyHash | Download My Data',
	description: 'Download My Own Data from SassyHash'
}
// - Page Header
const header = {
	title: 'My Own <strong>Data</strong>.',
	text: 'Proof of Read-Write-Own by downloading my data.'
}

// - Session
const session = await getSession(Astro.request)
const fid = session?.user?.email ? parseInt(session?.user?.email) : null
---

<Layout title={SEO.title} description={SEO.description}>
	<JustHero
	title={header.title}
	text={header.text}
	id="contact"
	classes="bg-neutral-50 dark:bg-neutral-950/80"
	>
	<AuthBlock />
	{fid && <MyMessagesTable fid={fid} client:only="react" />}
	</JustHero>
</Layout>
